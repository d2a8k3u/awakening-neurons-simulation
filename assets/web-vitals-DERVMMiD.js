var e,t,n,r,i=function(e,t){return{name:e,value:t===void 0?-1:t,delta:0,entries:[],id:`v2-${Date.now()}-${Math.floor(8999999999999*Math.random())+0xe8d4a51000}`}},a=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if(e===`first-input`&&!(`PerformanceEventTiming`in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch{}},o=function(e,t){var n=function n(r){r.type!==`pagehide`&&document.visibilityState!==`hidden`||(e(r),t&&(removeEventListener(`visibilitychange`,n,!0),removeEventListener(`pagehide`,n,!0)))};addEventListener(`visibilitychange`,n,!0),addEventListener(`pagehide`,n,!0)},s=function(e){addEventListener(`pageshow`,(function(t){t.persisted&&e(t)}),!0)},c=function(e,t,n){var r;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(r||0),(t.delta||r===void 0)&&(r=t.value,e(t)))}},l=-1,u=function(){return document.visibilityState===`hidden`?0:1/0},d=function(){o((function(e){l=e.timeStamp}),!0)},f=function(){return l<0&&(l=u(),d(),s((function(){setTimeout((function(){l=u(),d()}),0)}))),{get firstHiddenTime(){return l}}},p=function(e,t){var n,r=f(),o=i(`FCP`),l=function(e){e.name===`first-contentful-paint`&&(d&&d.disconnect(),e.startTime<r.firstHiddenTime&&(o.value=e.startTime,o.entries.push(e),n(!0)))},u=window.performance&&performance.getEntriesByName&&performance.getEntriesByName(`first-contentful-paint`)[0],d=u?null:a(`paint`,l);(u||d)&&(n=c(e,o,t),u&&l(u),s((function(r){o=i(`FCP`),n=c(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-r.timeStamp,n(!0)}))}))})))},m=!1,h=-1,g=function(e,t){m||=(p((function(e){h=e.value})),!0);var n,r=function(t){h>-1&&e(t)},l=i(`CLS`,0),u=0,d=[],f=function(e){if(!e.hadRecentInput){var t=d[0],r=d[d.length-1];u&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(u+=e.value,d.push(e)):(u=e.value,d=[e]),u>l.value&&(l.value=u,l.entries=d,n())}},g=a(`layout-shift`,f);g&&(n=c(r,l,t),o((function(){g.takeRecords().map(f),n(!0)})),s((function(){u=0,h=-1,l=i(`CLS`,0),n=c(r,l,t)})))},_={passive:!0,capture:!0},v=new Date,y=function(r,i){e||(e=i,t=r,n=new Date,S(removeEventListener),b())},b=function(){if(t>=0&&t<n-v){var i={entryType:`first-input`,name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};r.forEach((function(e){e(i)})),r=[]}},x=function(e){if(e.cancelable){var t=(e.timeStamp>0xe8d4a51000?new Date:performance.now())-e.timeStamp;e.type==`pointerdown`?function(e,t){var n=function(){y(e,t),i()},r=function(){i()},i=function(){removeEventListener(`pointerup`,n,_),removeEventListener(`pointercancel`,r,_)};addEventListener(`pointerup`,n,_),addEventListener(`pointercancel`,r,_)}(t,e):y(t,e)}},S=function(e){[`mousedown`,`keydown`,`touchstart`,`pointerdown`].forEach((function(t){return e(t,x,_)}))},C=function(n,l){var u,d=f(),p=i(`FID`),m=function(e){e.startTime<d.firstHiddenTime&&(p.value=e.processingStart-e.startTime,p.entries.push(e),u(!0))},h=a(`first-input`,m);u=c(n,p,l),h&&o((function(){h.takeRecords().map(m),h.disconnect()}),!0),h&&s((function(){var a;p=i(`FID`),u=c(n,p,l),r=[],t=-1,e=null,S(addEventListener),a=m,r.push(a),b()}))},w={},T=function(e,t){var n,r=f(),l=i(`LCP`),u=function(e){var t=e.startTime;t<r.firstHiddenTime&&(l.value=t,l.entries.push(e),n())},d=a(`largest-contentful-paint`,u);if(d){n=c(e,l,t);var p=function(){w[l.id]||(d.takeRecords().map(u),d.disconnect(),w[l.id]=!0,n(!0))};[`keydown`,`click`].forEach((function(e){addEventListener(e,p,{once:!0,capture:!0})})),o(p,!0),s((function(r){l=i(`LCP`),n=c(e,l,t),requestAnimationFrame((function(){requestAnimationFrame((function(){l.value=performance.now()-r.timeStamp,w[l.id]=!0,n(!0)}))}))}))}},E=function(e){var t,n=i(`TTFB`);t=function(){try{var t=performance.getEntriesByType(`navigation`)[0]||function(){var e=performance.timing,t={entryType:`navigation`,startTime:0};for(var n in e)n!==`navigationStart`&&n!==`toJSON`&&(t[n]=Math.max(e[n]-e.navigationStart,0));return t}();if(n.value=n.delta=t.responseStart,n.value<0||n.value>performance.now())return;n.entries=[t],e(n)}catch{}},document.readyState===`complete`?setTimeout(t,0):addEventListener(`load`,(function(){return setTimeout(t,0)}))};export{g as getCLS,p as getFCP,C as getFID,T as getLCP,E as getTTFB};